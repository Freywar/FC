<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="FC.css" rel="stylesheet" />
    <script src="FC.js"></script>
    <script type="text/javascript">
        var combos = [];

        function updateCombos()
        {
            for (var i=0; i<combos.length; i++)
            {
                combos[i].setLocalSearch(document.getElementById('localSearch').checked);
                combos[i].setLocalSearchTimeout(document.getElementById('localSearchTimeout').checked);
                combos[i].setServerSearch(document.getElementById('serverSearch').checked);
                combos[i].setServerSearchTimeout(document.getElementById('serverSearchTimeout').checked);
                combos[i].setShowIcons(document.getElementById('serverSearchTimeout').checked)
            }
        }

        function loaded()
        {
            combos.push(new Combo({
                parentNode: document.getElementById(combos),
                emptyText: 'Start typing name or surname...',
                emptyListText: 'Nothing found',
                width: 400,
                height: 24,
                extendedSearch: true,
                selectionChanged: delegate(function (s, e) { console.log(e) }, this)
            }))

            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/getUsers?first_name&last_name&domain', true);
            xhr.onreadystatechange = function ()
            {
                if (xhr.readyState === 4 && xhr.status === 200)
                    document.getElementById('data').innerText = 'Available users:\n' + xhr.responseText;
            }
            xhr.send(null, true);
        }
    </script>
</head>

<body onload="loaded()">
    <input id="localSearch" type="checkbox" checked="checked" /> Use local search after <input id="localSearchTimeout" type="text" value="100" /> ms.
    <input id="serverSearch" type="checkbox" checked="checked" /> Use server search after <input type="text" value="1000" /> ms.
    <input id="showIcons" type="checkbox" /> Show photos.
    <div id="combos"></div>
    <input type="button" value="Add combo." />
    <div id="data"></div>


</body>
</html>
